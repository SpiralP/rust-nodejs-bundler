<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This tiny crate checks that the running or installed `rustc` meets some version requirements. The version is queried by calling the Rust compiler with `--version`. The path to the compiler is determined first via the `RUSTC` environment variable. If it is not set, then `rustc` is used. If that fails, no determination is made, and calls return `None`."><title>version_check - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="version_check" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0-nightly (27d6200a7 2025-05-06)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../version_check/index.html">version_<wbr>check</a><span class="version">0.9.5</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li><li><a href="#feature-detection" title="Feature Detection">Feature Detection</a></li><li><a href="#alternatives" title="Alternatives">Alternatives</a></li></ul><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>version_check</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/version_check/lib.rs.html#1-528">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This tiny crate checks that the running or installed <code>rustc</code> meets some
version requirements. The version is queried by calling the Rust compiler
with <code>--version</code>. The path to the compiler is determined first via the
<code>RUSTC</code> environment variable. If it is not set, then <code>rustc</code> is used. If
that fails, no determination is made, and calls return <code>None</code>.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p><strong>Note:</strong> Please see <a href="index.html#feature-detection" title="mod version_check">feature detection</a> for a note on enabling unstable
features based on detection via this crate.</p>
<ul>
<li>
<p>Set a <code>cfg</code> flag in <code>build.rs</code> if the running compiler was determined to
be at least version <code>1.13.0</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">if </span>rustc::is_min_version(<span class="string">"1.13.0"</span>).unwrap_or(<span class="bool-val">false</span>) {
    <span class="macro">println!</span>(<span class="string">"cargo:rustc-cfg=question_mark_operator"</span>);
}</code></pre></div>
<p>See <a href="fn.is_max_version.html" title="fn version_check::is_max_version"><code>is_max_version</code></a> or <a href="fn.is_exact_version.html" title="fn version_check::is_exact_version"><code>is_exact_version</code></a> to check if the compiler
is <em>at most</em> or <em>exactly</em> a certain version.
<br /><br /></p>
</li>
<li>
<p>Check that the running compiler was released on or after <code>2018-12-18</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::is_min_date(<span class="string">"2018-12-18"</span>) {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">"Yep! It's recent!"</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">"No, it's older."</span>,
    <span class="prelude-val">None </span>=&gt; <span class="string">"Couldn't determine the rustc version."
</span>};</code></pre></div>
<p>See <a href="fn.is_max_date.html" title="fn version_check::is_max_date"><code>is_max_date</code></a> or <a href="fn.is_exact_date.html" title="fn version_check::is_exact_date"><code>is_exact_date</code></a> to check if the compiler was
released <em>prior to</em> or <em>exactly on</em> a certain date.
<br /><br /></p>
</li>
<li>
<p>Check that the running compiler supports feature flags:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::is_feature_flaggable() {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">"Yes! It's a dev or nightly release!"</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">"No, it's stable or beta."</span>,
    <span class="prelude-val">None </span>=&gt; <span class="string">"Couldn't determine the rustc version."
</span>};</code></pre></div>
<p>Please see the note on <a href="index.html#feature-detection" title="mod version_check">feature detection</a>.
<br /><br /></p>
</li>
<li>
<p>Check that the running compiler supports a specific feature:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">if let </span><span class="prelude-val">Some</span>(<span class="bool-val">true</span>) = rustc::supports_feature(<span class="string">"doc_cfg"</span>) {
   <span class="macro">println!</span>(<span class="string">"cargo:rustc-cfg=has_doc_cfg"</span>);
}</code></pre></div>
<p>Please see the note on <a href="index.html#feature-detection" title="mod version_check">feature detection</a>.
<br /><br /></p>
</li>
<li>
<p>Check that the running compiler is on the stable channel:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::Channel::read() {
    <span class="prelude-val">Some</span>(c) <span class="kw">if </span>c.is_stable() =&gt; <span class="macro">format!</span>(<span class="string">"Yes! It's stable."</span>),
    <span class="prelude-val">Some</span>(c) =&gt; <span class="macro">format!</span>(<span class="string">"No, the channel {} is not stable."</span>, c),
    <span class="prelude-val">None </span>=&gt; <span class="macro">format!</span>(<span class="string">"Couldn't determine the rustc version."</span>)
};</code></pre></div>
</li>
</ul>
<p>To interact with the version, release date, and release channel as structs,
use <a href="struct.Version.html" title="struct version_check::Version"><code>Version</code></a>, <a href="struct.Date.html" title="struct version_check::Date"><code>Date</code></a>, and <a href="struct.Channel.html" title="struct version_check::Channel"><code>Channel</code></a>, respectively. The <a href="fn.triple.html" title="fn version_check::triple"><code>triple()</code></a>
function returns all three values efficiently.</p>
<h2 id="feature-detection"><a class="doc-anchor" href="#feature-detection">§</a>Feature Detection</h2>
<p>While this crate can be used to determine if the current compiler supports
an unstable feature, no crate can determine whether that feature will work
in a way that you expect ad infinitum. If the feature changes in an
incompatible way, then your crate, as well as all of its transitive
dependents, will fail to build. As a result, great care should be taken when
enabling nightly features even when they’re supported by the compiler.</p>
<p>One common mitigation used in practice is to make using unstable features
transitively opt-in via a crate feature or <code>cfg</code> so that broken builds only
affect those that explicitly asked for the feature. Another complementary
approach is to probe <code>rustc</code> at build-time by asking it to compile a small
but exemplary program that determines whether the feature works as expected,
enabling the feature only if the probe succeeds. Finally, eschewing these
recommendations, you should track the <code>nightly</code> channel closely to minimize
the total impact of a nightly breakages.</p>
<h2 id="alternatives"><a class="doc-anchor" href="#alternatives">§</a>Alternatives</h2>
<p>This crate is dead simple with no dependencies. If you need something more
and don’t care about panicking if the version cannot be obtained, or if you
don’t mind adding dependencies, see
<a href="https://crates.io/crates/rustc_version">rustc_version</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Channel.html" title="struct version_check::Channel">Channel</a></dt><dd>Release channel: “dev”, “nightly”, “beta”, or “stable”.</dd><dt><a class="struct" href="struct.Date.html" title="struct version_check::Date">Date</a></dt><dd>Release date including year, month, and day.</dd><dt><a class="struct" href="struct.Version.html" title="struct version_check::Version">Version</a></dt><dd>Version number: <code>major.minor.patch</code>, ignoring release channel.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.is_exact_date.html" title="fn version_check::is_exact_date">is_<wbr>exact_<wbr>date</a></dt><dd>Checks that the running or installed <code>rustc</code> was released <strong>exactly</strong> on
some date.</dd><dt><a class="fn" href="fn.is_exact_version.html" title="fn version_check::is_exact_version">is_<wbr>exact_<wbr>version</a></dt><dd>Checks that the running or installed <code>rustc</code> is <strong>exactly</strong> some version.</dd><dt><a class="fn" href="fn.is_feature_flaggable.html" title="fn version_check::is_feature_flaggable">is_<wbr>feature_<wbr>flaggable</a></dt><dd>Checks whether the running or installed <code>rustc</code> supports feature flags.</dd><dt><a class="fn" href="fn.is_max_date.html" title="fn version_check::is_max_date">is_<wbr>max_<wbr>date</a></dt><dd>Checks that the running or installed <code>rustc</code> was released <strong>on or before</strong>
some date.</dd><dt><a class="fn" href="fn.is_max_version.html" title="fn version_check::is_max_version">is_<wbr>max_<wbr>version</a></dt><dd>Checks that the running or installed <code>rustc</code> is <strong>at most</strong> some maximum
version.</dd><dt><a class="fn" href="fn.is_min_date.html" title="fn version_check::is_min_date">is_<wbr>min_<wbr>date</a></dt><dd>Checks that the running or installed <code>rustc</code> was released <strong>on or after</strong>
some date.</dd><dt><a class="fn" href="fn.is_min_version.html" title="fn version_check::is_min_version">is_<wbr>min_<wbr>version</a></dt><dd>Checks that the running or installed <code>rustc</code> is <strong>at least</strong> some minimum
version.</dd><dt><a class="fn" href="fn.supports_feature.html" title="fn version_check::supports_feature">supports_<wbr>feature</a></dt><dd>Checks whether the running or installed <code>rustc</code> supports <code>feature</code>.</dd><dt><a class="fn" href="fn.triple.html" title="fn version_check::triple">triple</a></dt><dd>Reads the triple of <a href="struct.Version.html" title="struct version_check::Version"><code>Version</code></a>, <a href="struct.Channel.html" title="struct version_check::Channel"><code>Channel</code></a>, and <a href="struct.Date.html" title="struct version_check::Date"><code>Date</code></a> of the installed
or running <code>rustc</code>.</dd></dl></section></div></main></body></html>